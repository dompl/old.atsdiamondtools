"use strict";(function(){jQuery(document).ready(function(t){var d,s,e,a,l,c,r,u,_,n;return l=t(".wc-address-validation-field"),c=l.find("select"),r=c.parent("p"),s=t(".wc-address-validation-billing-field"),_=t(".wc-address-validation-shipping-field"),a=t('p[id$="_field"], p.create-account').not("#billing_country_field").not("#shipping_country_field"),d=t('p[id^="billing_"][id$="_field"], p.create-account').not("#billing_country_field"),u=t('p[id^="shipping_"][id$="_field"]').not("#shipping_country_field"),e=t('select[id$="country"], input[id$="country"]'),n=wc_address_validation_postcode_lookup.countries,setTimeout(function(){return t("#billing_country_field").after(s),t("#shipping_country_field").after(_)},1),e.on("change",function(e){if(-1!==t.inArray(t("#billing_country").val(),n)?s.show():s.hide(),-1!==n.indexOf(t("#shipping_country").val())?_.show():_.hide(),wc_address_validation_postcode_lookup.force_postcode_lookup)return d.delay().queue(function(){var e,i;return i=(e=t(".wc-address-validation-enhanced-select.billing")).val(),-1!==n.indexOf(t("#billing_country").val())&&""===wc_address_validation_postcode_lookup.billing_postcode?!e.is(":visible")||"none"!==i&&null!==i||t(this).hide():!e.is(":visible")||"none"!==i&&null!==i?t(this).show():t(this).hide(),t(this).dequeue()}),u.delay().queue(function(){var e,i;return i=(e=t(".wc-address-validation-enhanced-select.shipping")).val(),-1!==n.indexOf(t("#shipping_country").val())&&""===wc_address_validation_postcode_lookup.shipping_postcode?!e.is(":visible")||"none"!==i&&null!==i||t(this).hide():!e.is(":visible")||"none"!==i&&null!==i?t(this).show():t(this).hide(),t(this).dequeue()})}),e.trigger("change"),t().select2&&l.find("select.wc-address-validation-enhanced-select").select2(),r.hide(),l.keypress(function(e){if(13===e.keyCode)return(l="billing"===t(this).find(".wc-address-validation-address-type").val()?s:_).find("a.button").trigger("click"),!1}),l.on("click","a.button",function(e){var i,n,o;return e.preventDefault(),i=t(this).siblings(".wc-address-validation-address-type").val(),a="billing"===i?d:u,c=(l="billing"===i?s:_).find("select"),!((r=c.parent("p")).is(".processing")||!l.find("input[type=text]").val())&&(r.addClass("processing").block({message:null,overlayCSS:{background:"#fff url( "+wc_address_validation_postcode_lookup.ajax_loader_url+" ) no-repeat center",opacity:.6}}),o={action:"wc_address_validation_lookup_postcode",security:wc_address_validation_postcode_lookup.nonce,postcode:l.find('input[name="wc_address_validation_postcode_lookup_postcode"]').val(),house_number:l.find('input[name="wc_address_validation_postcode_lookup_postcode_house_number"]').val()},"undefined"!=typeof wc_checkout_params?(n=wc_checkout_params.wc_ajax_url.toString().replace("%%endpoint%%","wc_address_validation_lookup_postcode"),delete o.action):n=wc_address_validation_postcode_lookup.ajax_url,t.ajax({type:"GET",url:n,data:o,dataType:"json",success:function(e){var i;if(e)return r.removeClass("processing").unblock(),c.find("option").remove(),r.show(),t(e).map(function(){return t("<option>").val(this.value).text(this.name).data("location",this).appendTo(c)}),i=function(){if(t().select2)return c.trigger("change"),c.select2("open")},!a.is(":visible")&&wc_address_validation_postcode_lookup.force_postcode_lookup&&"none"!==e.value?a.slideDown(null,function(){return i()}):i()}}))}),c.change(function(){var e,n,o;if(o=t(this).hasClass("billing")?"billing":"shipping",e=["company","address_1","address_2","address_3","city","postcode","state"],"none"!==(n=t(this).find(":selected").data("location")).value)return t.each(e,function(e,i){return t("input[name="+o+"_"+i+"]").val(n[i])}),t(document.body).trigger("update_checkout")})})}).call(void 0);